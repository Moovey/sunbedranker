import { Link, Head, useForm, router } from '@inertiajs/react';
import { useState, useEffect } from 'react';
import { toast } from 'react-toastify';
import AdminNav from '@/Components/AdminNav';
import TabButton from '@/Components/Admin/Hotels/TabButton';
import BasicInfoTab from '@/Components/Admin/Hotels/BasicInfoTab';
import ImagesTab from '@/Components/Admin/Hotels/ImagesTab';
import PoolFeaturesTab from '@/Components/Admin/Hotels/PoolFeaturesTab';
import SubscriptionTab from '@/Components/Admin/Hotels/SubscriptionTab';
import AffiliateTab from '@/Components/Admin/Hotels/AffiliateTab';
import BadgesTab from '@/Components/Admin/Hotels/BadgesTab';

export default function EditHotel({ hotel, destinations, badges, flash, stats }) {
    const [activeTab, setActiveTab] = useState('basic');
    const [uploadingMain, setUploadingMain] = useState(false);
    const [uploadingGallery, setUploadingGallery] = useState(false);

    useEffect(() => {
        if (flash?.success) {
            toast.success(flash.success);
        }
        if (flash?.error) {
            toast.error(flash.error);
        }
    }, [flash]);

    const { data, setData, patch, processing, errors } = useForm({
        name: hotel.name || '',
        destination_id: hotel.destination_id || '',
        description: hotel.description || '',
        address: hotel.address || '',
        latitude: hotel.latitude || '',
        longitude: hotel.longitude || '',
        star_rating: hotel.star_rating || '',
        total_rooms: hotel.total_rooms || '',
        phone: hotel.phone || '',
        email: hotel.email || '',
        website: hotel.website || '',
        booking_affiliate_url: hotel.booking_affiliate_url || '',
        expedia_affiliate_url: hotel.expedia_affiliate_url || '',
        direct_booking_url: hotel.direct_booking_url || '',
        affiliate_provider: hotel.affiliate_provider || '',
        affiliate_tracking_code: hotel.affiliate_tracking_code || '',
        is_active: hotel.is_active || false,
        is_verified: hotel.is_verified || false,
        is_featured: hotel.is_featured || false,
        subscription_tier: hotel.subscription_tier || 'free',
        subscription_expires_at: hotel.subscription_expires_at || '',
        override_name: hotel.override_name || false,
        override_images: hotel.override_images || false,
        override_description: hotel.override_description || false,
        // Pool & Features
        pool_overview: hotel.pool_criteria?.pool_overview || [],
        pool_overview_other: '',
        pool_details: hotel.pool_criteria?.pool_details || [],
        pool_details_other: '',
        sun_exposure: hotel.pool_criteria?.sun_exposure || '',
        number_of_pools: hotel.pool_criteria?.number_of_pools || '',
        shade_options: hotel.pool_criteria?.shade_options || [],
        shade_options_other: '',
        special_features: hotel.pool_criteria?.special_features_list || [],
        special_features_other: '',
        atmosphere_vibe: hotel.pool_criteria?.atmosphere_vibe || [],
        atmosphere_vibe_other: '',
        family_features: hotel.pool_criteria?.family_features || [],
        family_features_other: '',
    });

    const handleSubmit = (e) => {
        e.preventDefault();
        patch(route('admin.hotels.update', hotel.id), {
            onSuccess: () => {
                toast.success('Hotel updated successfully!');
            },
            onError: () => {
                toast.error('Failed to update hotel. Please check the form.');
            }
        });
    };

    const handleMainImageUpload = async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const formData = new FormData();
        formData.append('image', file);

        setUploadingMain(true);
        try {
            await axios.post(route('admin.hotels.upload-main-image', hotel.id), formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            router.reload({ only: ['hotel'] });
            toast.success('Main image uploaded successfully!');
        } catch (error) {
            toast.error('Failed to upload image');
        } finally {
            setUploadingMain(false);
        }
    };

    const handleGalleryUpload = async (e) => {
        const files = Array.from(e.target.files);
        if (files.length === 0) return;

        const formData = new FormData();
        files.forEach((file, index) => {
            formData.append(`images[${index}]`, file);
        });

        setUploadingGallery(true);
        try {
            await axios.post(route('admin.hotels.upload-gallery-images', hotel.id), formData, {
                headers: { 'Content-Type': 'multipart/form-data' }
            });
            router.reload({ only: ['hotel'] });
            toast.success('Gallery images uploaded successfully!');
        } catch (error) {
            toast.error('Failed to upload images');
        } finally {
            setUploadingGallery(false);
        }
    };

    const deleteGalleryImage = async (imagePath) => {
        if (!confirm('Delete this image?')) return;

        try {
            await axios.delete(route('admin.hotels.delete-gallery-image', hotel.id), {
                data: { image_path: imagePath }
            });
            router.reload({ only: ['hotel'] });
            toast.success('Image deleted successfully!');
        } catch (error) {
            toast.error('Failed to delete image');
        }
    };

    const updateSubscription = async () => {
        router.post(route('admin.hotels.update-subscription', hotel.id), {
            subscription_tier: data.subscription_tier,
            subscription_expires_at: data.subscription_expires_at,
        }, {
            onSuccess: () => toast.success('Subscription updated successfully!'),
            onError: () => toast.error('Failed to update subscription')
        });
    };

    const autoAssignBadges = () => {
        router.post(route('admin.hotels.auto-assign-badges', hotel.id), {}, {
            onSuccess: () => toast.success('Badges auto-assigned successfully!'),
            onError: () => toast.error('Failed to auto-assign badges')
        });
    };

    return (
        <>
            <Head title={`Edit ${hotel.name}`} />
            
            <div className="min-h-screen bg-neutral-50 font-sans-luxury">
                <AdminNav stats={stats} />
                
                {/* Page Header */}
                <div className="bg-white shadow-sm border-b border-neutral-100">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 md:py-10 lg:py-12">
                        {/* Decorative accent */}
                        <div className="flex items-center justify-center mb-4 sm:mb-5 md:mb-6">
                            <div className="h-px w-8 sm:w-10 md:w-12 bg-neutral-300"></div>
                            <svg className="mx-3 sm:mx-4 text-neutral-400" width="16" height="16" viewBox="0 0 20 20" fill="none">
                                <path d="M10 2L11.5 8.5L18 10L11.5 11.5L10 18L8.5 11.5L2 10L8.5 8.5L10 2Z" stroke="currentColor" strokeWidth="1.5"/>
                            </svg>
                            <div className="h-px w-8 sm:w-10 md:w-12 bg-neutral-300"></div>
                        </div>
                        <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div className="text-center sm:text-left flex-1">
                                <h1 className="font-serif-luxury text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-light text-neutral-900 tracking-tight">{hotel.name}</h1>
                                <div className="flex items-center justify-center sm:justify-start gap-3 mt-3 sm:mt-4 flex-wrap">
                                    <span className={`px-3 py-1 text-xs rounded-full font-light ${
                                        hotel.subscription_tier === 'premium' ? 'bg-purple-100 text-purple-700' :
                                        hotel.subscription_tier === 'enhanced' ? 'bg-blue-100 text-blue-700' :
                                        'bg-neutral-100 text-neutral-600'
                                    }`}>
                                        {hotel.subscription_tier}
                                    </span>
                                    {hotel.is_active && <span className="text-sm text-green-600 font-light">● Active</span>}
                                    {hotel.is_verified && <span className="text-sm text-blue-600 font-light">✓ Verified</span>}
                                    {hotel.is_featured && <span className="text-sm text-orange-600 font-light">⭐ Featured</span>}
                                </div>
                            </div>
                            <div className="flex gap-2 sm:gap-3 flex-wrap justify-center sm:justify-end">
                                <button
                                    onClick={autoAssignBadges}
                                    className="px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 font-light transition-all duration-300 tracking-wide text-sm"
                                >
                                    Auto-Assign Badges
                                </button>
                                <Link
                                    href={route('hotels.show', hotel.slug)}
                                    target="_blank"
                                    className="px-4 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 font-light transition-all duration-300 tracking-wide hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] text-sm whitespace-nowrap"
                                >
                                    View Public Page
                                </Link>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 md:py-12 lg:py-16">
                    {/* Tabs */}
                    <div className="bg-white rounded-t-xl border-b border-neutral-200">
                        <div className="flex gap-1 px-6 pt-4">
                            <TabButton active={activeTab === 'basic'} onClick={() => setActiveTab('basic')}>
                                Basic Info
                            </TabButton>
                            <TabButton active={activeTab === 'images'} onClick={() => setActiveTab('images')}>
                                Images
                            </TabButton>
                            <TabButton active={activeTab === 'pool'} onClick={() => setActiveTab('pool')}>
                                Pool & Features
                            </TabButton>
                            <TabButton active={activeTab === 'subscription'} onClick={() => setActiveTab('subscription')}>
                                Subscription
                            </TabButton>
                            <TabButton active={activeTab === 'affiliate'} onClick={() => setActiveTab('affiliate')}>
                                Affiliate
                            </TabButton>
                            <TabButton active={activeTab === 'badges'} onClick={() => setActiveTab('badges')}>
                                Badges
                            </TabButton>
                        </div>
                    </div>

                    {/* Tab Content */}
                    <div className="bg-white rounded-b-xl shadow-lg p-8">
                        {activeTab === 'basic' && (
                            <BasicInfoTab
                                data={data}
                                setData={setData}
                                errors={errors}
                                processing={processing}
                                destinations={destinations}
                                handleSubmit={handleSubmit}
                            />
                        )}

                        {activeTab === 'images' && (
                            <ImagesTab
                                hotel={hotel}
                                uploadingMain={uploadingMain}
                                uploadingGallery={uploadingGallery}
                                handleMainImageUpload={handleMainImageUpload}
                                handleGalleryUpload={handleGalleryUpload}
                                deleteGalleryImage={deleteGalleryImage}
                            />
                        )}

                        {activeTab === 'pool' && (
                            <PoolFeaturesTab
                                data={data}
                                setData={setData}
                                errors={errors}
                                processing={processing}
                                handleSubmit={handleSubmit}
                            />
                        )}

                        {activeTab === 'subscription' && (
                            <SubscriptionTab
                                data={data}
                                setData={setData}
                                updateSubscription={updateSubscription}
                            />
                        )}

                        {activeTab === 'affiliate' && (
                            <AffiliateTab
                                hotel={hotel}
                                data={data}
                                setData={setData}
                                errors={errors}
                                processing={processing}
                                handleSubmit={handleSubmit}
                            />
                        )}

                        {activeTab === 'badges' && (
                            <BadgesTab
                                hotel={hotel}
                                autoAssignBadges={autoAssignBadges}
                            />
                        )}
                    </div>
                </div>
            </div>
        </>
    );
}
                                        <input
                                            type="text"
                                            value={data.address}
                                            onChange={e => setData('address', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Latitude
                                        </label>
                                        <input
                                            type="text"
                                            value={data.latitude}
                                            onChange={e => setData('latitude', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                            placeholder="e.g., 5.2334"
                                        />
                                        {errors.latitude && <p className="mt-1 text-sm text-red-600">{errors.latitude}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Longitude
                                        </label>
                                        <input
                                            type="text"
                                            value={data.longitude}
                                            onChange={e => setData('longitude', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                            placeholder="e.g., 73.0297"
                                        />
                                        {errors.longitude && <p className="mt-1 text-sm text-red-600">{errors.longitude}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Star Rating
                                        </label>
                                        <select
                                            value={data.star_rating}
                                            onChange={e => setData('star_rating', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="">Select Rating</option>
                                            {[1, 2, 3, 4, 5].map(rating => (
                                                <option key={rating} value={rating}>{rating} Star</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Total Rooms
                                        </label>
                                        <input
                                            type="number"
                                            value={data.total_rooms}
                                            onChange={e => setData('total_rooms', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Phone
                                        </label>
                                        <input
                                            type="text"
                                            value={data.phone}
                                            onChange={e => setData('phone', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Email
                                        </label>
                                        <input
                                            type="email"
                                            value={data.email}
                                            onChange={e => setData('email', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                    </div>

                                    <div className="md:col-span-2">
                                        <label className="block text-sm font-medium text-neutral-700 mb-2">
                                            Website
                                        </label>
                                        <input
                                            type="url"
                                            value={data.website}
                                            onChange={e => setData('website', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        />
                                    </div>
                                </div>

                                {/* Status Toggles */}
                                <div className="border-t border-neutral-200 pt-6">
                                    <h3 className="text-lg font-medium text-neutral-900 mb-4">Status Settings</h3>
                                    <div className="flex flex-wrap gap-6">
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.is_active}
                                                onChange={e => setData('is_active', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Active</span>
                                        </label>
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.is_verified}
                                                onChange={e => setData('is_verified', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Verified</span>
                                        </label>
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.is_featured}
                                                onChange={e => setData('is_featured', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Featured</span>
                                        </label>
                                    </div>
                                </div>

                                {/* Override Flags */}
                                <div className="border-t border-neutral-200 pt-6">
                                    <h3 className="text-lg font-medium text-neutral-900 mb-4">Override Settings</h3>
                                    <div className="flex flex-wrap gap-6">
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.override_name}
                                                onChange={e => setData('override_name', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Override Name (Don't update from API)</span>
                                        </label>
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.override_images}
                                                onChange={e => setData('override_images', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Override Images</span>
                                        </label>
                                        <label className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                checked={data.override_description}
                                                onChange={e => setData('override_description', e.target.checked)}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <span className="text-sm text-neutral-700">Override Description</span>
                                        </label>
                                    </div>
                                </div>

                                <div className="flex justify-end gap-3 pt-6 border-t border-neutral-200">
                                    <Link
                                        href={route('admin.hotels.index')}
                                        className="px-6 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50"
                                    >
                                        Cancel
                                    </Link>
                                    <button
                                        type="submit"
                                        disabled={processing}
                                        className="px-6 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 disabled:opacity-50"
                                    >
                                        {processing ? 'Saving...' : 'Save Changes'}
                                    </button>
                                </div>
                            </form>
                        )}

                        {activeTab === 'images' && (
                            <div className="space-y-8">
                                {/* Main Image */}
                                <div>
                                    <h3 className="text-lg font-medium text-neutral-900 mb-4">Main Image</h3>
                                    <div className="flex items-start gap-6">
                                        {hotel.main_image && (
                                            <img
                                                src={hotel.main_image}
                                                alt={hotel.name}
                                                className="w-64 h-40 object-cover rounded-lg"
                                            />
                                        )}
                                        <div>
                                            <input
                                                type="file"
                                                accept="image/*"
                                                onChange={handleMainImageUpload}
                                                className="hidden"
                                                id="main-image-upload"
                                                disabled={uploadingMain}
                                            />
                                            <label
                                                htmlFor="main-image-upload"
                                                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer inline-block"
                                            >
                                                {uploadingMain ? 'Uploading...' : 'Upload Main Image'}
                                            </label>
                                            <p className="text-sm text-neutral-500 mt-2">
                                                Recommended: 1200x800px, max 5MB
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                {/* Gallery Images */}
                                <div className="border-t border-neutral-200 pt-8">
                                    <h3 className="text-lg font-medium text-neutral-900 mb-4">Image Gallery</h3>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        {hotel.images?.map((image, index) => (
                                            <div key={index} className="relative group">
                                                <img
                                                    src={`/storage/${image}`}
                                                    alt={`Gallery ${index + 1}`}
                                                    className="w-full h-32 object-cover rounded-lg"
                                                />
                                                <button
                                                    onClick={() => deleteGalleryImage(image)}
                                                    className="absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"
                                                >
                                                    ×
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                    <input
                                        type="file"
                                        accept="image/*"
                                        multiple
                                        onChange={handleGalleryUpload}
                                        className="hidden"
                                        id="gallery-upload"
                                        disabled={uploadingGallery}
                                    />
                                    <label
                                        htmlFor="gallery-upload"
                                        className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer inline-block"
                                    >
                                        {uploadingGallery ? 'Uploading...' : 'Add Gallery Images'}
                                    </label>
                                </div>
                            </div>
                        )}

                        {activeTab === 'pool' && (
                            <form onSubmit={handleSubmit} className="space-y-6">
                                <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Pool & Features</h2>
                                
                                {/* Pool & Sun Overview */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Pool & Sun Overview (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Sun all day', 'Plenty of shade', 'Sun all day with shaded areas', 'Morning sun, afternoon shade', 
                                          'Afternoon sun, morning shade', 'Full sun exposure', 'Partially shaded throughout day', 
                                          'Natural palm tree shade', 'Cabanas and umbrellas available', 'Mix of sun and shade areas'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.pool_overview.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('pool_overview', [...data.pool_overview, option]);
                                                        } else {
                                                            setData('pool_overview', data.pool_overview.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.pool_overview_other}
                                            onChange={e => setData('pool_overview_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.pool_overview_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.pool_overview.includes(data.pool_overview_other.trim())) {
                                                        setData('pool_overview', [...data.pool_overview, data.pool_overview_other.trim()]);
                                                    }
                                                    setData('pool_overview_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.pool_overview_other.trim() && !data.pool_overview.includes(data.pool_overview_other.trim())) {
                                                    setData('pool_overview', [...data.pool_overview, data.pool_overview_other.trim()]);
                                                    setData('pool_overview_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.pool_overview.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.pool_overview.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('pool_overview', data.pool_overview.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.pool_overview && <p className="mt-1 text-sm text-red-600 font-light">{errors.pool_overview}</p>}
                                </div>

                                {/* Pool Details */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Pool Details (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Infinity pool with ocean views', 'Multiple pools including infinity edge', 'Rooftop pool with city views',
                                          'Lagoon-style pool with swim-up bar', 'Olympic-sized lap pool', 'Temperature-controlled pool year-round',
                                          'Adults-only pool available', 'Standard outdoor pool'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.pool_details.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('pool_details', [...data.pool_details, option]);
                                                        } else {
                                                            setData('pool_details', data.pool_details.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.pool_details_other}
                                            onChange={e => setData('pool_details_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.pool_details_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.pool_details.includes(data.pool_details_other.trim())) {
                                                        setData('pool_details', [...data.pool_details, data.pool_details_other.trim()]);
                                                    }
                                                    setData('pool_details_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.pool_details_other.trim() && !data.pool_details.includes(data.pool_details_other.trim())) {
                                                    setData('pool_details', [...data.pool_details, data.pool_details_other.trim()]);
                                                    setData('pool_details_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.pool_details.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.pool_details.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('pool_details', data.pool_details.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.pool_details && <p className="mt-1 text-sm text-red-600 font-light">{errors.pool_details}</p>}
                                </div>

                                {/* Sun Exposure & Number of Pools */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Sun Exposure
                                        </label>
                                        <select
                                            value={data.sun_exposure}
                                            onChange={e => setData('sun_exposure', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        >
                                            <option value="">Select sun exposure</option>
                                            <option value="All day sun">All day sun</option>
                                            <option value="Morning sun">Morning sun</option>
                                            <option value="Afternoon sun">Afternoon sun</option>
                                            <option value="Partial sun">Partial sun</option>
                                            <option value="Mostly shaded">Mostly shaded</option>
                                        </select>
                                        {errors.sun_exposure && <p className="mt-1 text-sm text-red-600 font-light">{errors.sun_exposure}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Number of Pools
                                        </label>
                                        <input
                                            type="number"
                                            min="0"
                                            value={data.number_of_pools}
                                            onChange={e => setData('number_of_pools', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="e.g., 3"
                                        />
                                        {errors.number_of_pools && <p className="mt-1 text-sm text-red-600 font-light">{errors.number_of_pools}</p>}
                                    </div>
                                </div>

                                {/* Shade Options */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Shade Options (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Umbrellas', 'Cabanas', 'Pergolas', 'Natural palm trees', 'Covered areas', 
                                          'Retractable awnings', 'Shade sails', 'No shade available'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.shade_options.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('shade_options', [...data.shade_options, option]);
                                                        } else {
                                                            setData('shade_options', data.shade_options.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.shade_options_other}
                                            onChange={e => setData('shade_options_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.shade_options_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.shade_options.includes(data.shade_options_other.trim())) {
                                                        setData('shade_options', [...data.shade_options, data.shade_options_other.trim()]);
                                                    }
                                                    setData('shade_options_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.shade_options_other.trim() && !data.shade_options.includes(data.shade_options_other.trim())) {
                                                    setData('shade_options', [...data.shade_options, data.shade_options_other.trim()]);
                                                    setData('shade_options_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.shade_options.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.shade_options.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('shade_options', data.shade_options.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.shade_options && <p className="mt-1 text-sm text-red-600 font-light">{errors.shade_options}</p>}
                                </div>

                                {/* Special Features */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Special Features (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Swim-up bar', 'Infinity edge', 'Waterfall', 'Lazy river', 'Water slides', 
                                          'Hot tub/Jacuzzi', 'Poolside DJ', 'Beach access', 'Underwater music', 
                                          'LED lighting', 'Heated pool', 'Saltwater pool', 'Private pool areas', 
                                          'Poolside cabanas with service'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.special_features.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('special_features', [...data.special_features, option]);
                                                        } else {
                                                            setData('special_features', data.special_features.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.special_features_other}
                                            onChange={e => setData('special_features_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.special_features_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.special_features.includes(data.special_features_other.trim())) {
                                                        setData('special_features', [...data.special_features, data.special_features_other.trim()]);
                                                    }
                                                    setData('special_features_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.special_features_other.trim() && !data.special_features.includes(data.special_features_other.trim())) {
                                                    setData('special_features', [...data.special_features, data.special_features_other.trim()]);
                                                    setData('special_features_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.special_features.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.special_features.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('special_features', data.special_features.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.special_features && <p className="mt-1 text-sm text-red-600 font-light">{errors.special_features}</p>}
                                </div>

                                {/* Atmosphere & Vibe */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Atmosphere & Vibe (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Lively and social with DJ and entertainment', 'Upbeat party atmosphere', 'Relaxed and tranquil escape',
                                          'Romantic and intimate setting', 'Family-friendly and energetic', 'Sophisticated and elegant',
                                          'Adults-only peaceful retreat', 'Casual and laid-back'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.atmosphere_vibe.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('atmosphere_vibe', [...data.atmosphere_vibe, option]);
                                                        } else {
                                                            setData('atmosphere_vibe', data.atmosphere_vibe.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.atmosphere_vibe_other}
                                            onChange={e => setData('atmosphere_vibe_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.atmosphere_vibe_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.atmosphere_vibe.includes(data.atmosphere_vibe_other.trim())) {
                                                        setData('atmosphere_vibe', [...data.atmosphere_vibe, data.atmosphere_vibe_other.trim()]);
                                                    }
                                                    setData('atmosphere_vibe_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.atmosphere_vibe_other.trim() && !data.atmosphere_vibe.includes(data.atmosphere_vibe_other.trim())) {
                                                    setData('atmosphere_vibe', [...data.atmosphere_vibe, data.atmosphere_vibe_other.trim()]);
                                                    setData('atmosphere_vibe_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.atmosphere_vibe.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.atmosphere_vibe.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('atmosphere_vibe', data.atmosphere_vibe.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.atmosphere_vibe && <p className="mt-1 text-sm text-red-600 font-light">{errors.atmosphere_vibe}</p>}
                                </div>

                                {/* Family Features */}
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                        Family Features (Select all that apply)
                                    </label>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                        {['Excellent - Kids pool, splash pad, kids club, babysitting', 'Very Good - Kids pool, kids club, family rooms',
                                          'Good - Kids pool and family-friendly amenities', 'Limited - Basic family facilities available',
                                          'Adults-only - No children facilities'].map(option => (
                                            <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={data.family_features.includes(option)}
                                                    onChange={e => {
                                                        if (e.target.checked) {
                                                            setData('family_features', [...data.family_features, option]);
                                                        } else {
                                                            setData('family_features', data.family_features.filter(item => item !== option));
                                                        }
                                                    }}
                                                    className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                />
                                                <span className="text-sm font-light text-neutral-700">{option}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={data.family_features_other}
                                            onChange={e => setData('family_features_other', e.target.value)}
                                            onKeyPress={e => {
                                                if (e.key === 'Enter' && data.family_features_other.trim()) {
                                                    e.preventDefault();
                                                    if (!data.family_features.includes(data.family_features_other.trim())) {
                                                        setData('family_features', [...data.family_features, data.family_features_other.trim()]);
                                                    }
                                                    setData('family_features_other', '');
                                                }
                                            }}
                                            placeholder="Other (type custom option and press Enter)..."
                                            className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        <button
                                            type="button"
                                            onClick={() => {
                                                if (data.family_features_other.trim() && !data.family_features.includes(data.family_features_other.trim())) {
                                                    setData('family_features', [...data.family_features, data.family_features_other.trim()]);
                                                    setData('family_features_other', '');
                                                }
                                            }}
                                            className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                        >
                                            Add
                                        </button>
                                    </div>
                                    {data.family_features.length > 0 && (
                                        <div className="flex flex-wrap gap-2 mt-2">
                                            {data.family_features.map((item, index) => (
                                                <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                    {item}
                                                    <button
                                                        type="button"
                                                        onClick={() => setData('family_features', data.family_features.filter((_, i) => i !== index))}
                                                        className="text-blue-600 hover:text-blue-900"
                                                    >
                                                        ×
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    )}
                                    {errors.family_features && <p className="mt-1 text-sm text-red-600 font-light">{errors.family_features}</p>}
                                </div>

                                <div className="flex justify-end gap-3 pt-6 border-t border-neutral-200">
                                    <Link
                                        href={route('admin.hotels.index')}
                                        className="px-6 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50"
                                    >
                                        Cancel
                                    </Link>
                                    <button
                                        type="submit"
                                        disabled={processing}
                                        className="px-6 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 disabled:opacity-50"
                                    >
                                        {processing ? 'Saving...' : 'Save Pool & Features'}
                                    </button>
                                </div>
                            </form>
                        )}

                        {activeTab === 'subscription' && (
                            <div className="space-y-6">
                                <div>
                                    <label className="block text-sm font-medium text-neutral-700 mb-2">
                                        Subscription Tier
                                    </label>
                                    <select
                                        value={data.subscription_tier}
                                        onChange={e => setData('subscription_tier', e.target.value)}
                                        className="w-full max-w-md px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="free">Free</option>
                                        <option value="enhanced">Enhanced</option>
                                        <option value="premium">Premium</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-neutral-700 mb-2">
                                        Expires At
                                    </label>
                                    <input
                                        type="date"
                                        value={data.subscription_expires_at}
                                        onChange={e => setData('subscription_expires_at', e.target.value)}
                                        className="w-full max-w-md px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>

                                <button
                                    onClick={updateSubscription}
                                    className="px-6 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800"
                                >
                                    Update Subscription
                                </button>
                            </div>
                        )}

                        {activeTab === 'affiliate' && (
                            <div className="space-y-6">
                                <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Affiliate & Booking Links</h2>
                                
                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                        Booking.com Affiliate URL
                                    </label>
                                    <input
                                        type="url"
                                        value={data.booking_affiliate_url}
                                        onChange={e => setData('booking_affiliate_url', e.target.value)}
                                        className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        placeholder="https://booking.com/..."
                                    />
                                    {errors.booking_affiliate_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.booking_affiliate_url}</p>}
                                </div>

                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                        Expedia Affiliate URL
                                    </label>
                                    <input
                                        type="url"
                                        value={data.expedia_affiliate_url}
                                        onChange={e => setData('expedia_affiliate_url', e.target.value)}
                                        className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        placeholder="https://expedia.com/..."
                                    />
                                    {errors.expedia_affiliate_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.expedia_affiliate_url}</p>}
                                </div>

                                <div>
                                    <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                        Direct Booking URL
                                    </label>
                                    <input
                                        type="url"
                                        value={data.direct_booking_url}
                                        onChange={e => setData('direct_booking_url', e.target.value)}
                                        className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        placeholder="https://..."
                                    />
                                    {errors.direct_booking_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.direct_booking_url}</p>}
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Affiliate Provider
                                        </label>
                                        <input
                                            type="text"
                                            value={data.affiliate_provider}
                                            onChange={e => setData('affiliate_provider', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        {errors.affiliate_provider && <p className="mt-1 text-sm text-red-600 font-light">{errors.affiliate_provider}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Affiliate Tracking Code
                                        </label>
                                        <input
                                            type="text"
                                            value={data.affiliate_tracking_code}
                                            onChange={e => setData('affiliate_tracking_code', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        />
                                        {errors.affiliate_tracking_code && <p className="mt-1 text-sm text-red-600 font-light">{errors.affiliate_tracking_code}</p>}
                                    </div>
                                </div>

                                <div className="bg-neutral-50 p-4 rounded-lg mt-6">
                                    <h4 className="text-sm font-medium text-neutral-900 mb-2">Performance Stats</h4>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <p className="text-sm text-neutral-600">Total Clicks</p>
                                            <p className="text-2xl font-light text-neutral-900">{hotel.click_count || 0}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-neutral-600">Total Revenue</p>
                                            <p className="text-2xl font-light text-neutral-900">
                                                ${(parseFloat(hotel.affiliate_revenue) || 0).toFixed(2)}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div className="mt-8 pt-6 border-t border-neutral-200 flex justify-end">
                                    <button
                                        type="button"
                                        onClick={handleSubmit}
                                        disabled={processing}
                                        className="px-6 py-3 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 font-light transition-all duration-300 tracking-wide hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {processing ? 'Saving...' : 'Save Changes'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'badges' && (
                            <div className="space-y-6">
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-2xl font-light text-neutral-900">Hotel Badges</h2>
                                    <button
                                        onClick={autoAssignBadges}
                                        className="px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 font-light transition-all duration-300"
                                    >
                                        Auto-Assign Badges
                                    </button>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {hotel.badges?.map(badge => (
                                        <div key={badge.id} className="p-4 border-2 border-green-200 bg-green-50 rounded-lg">
                                            <div className="flex items-center gap-3">
                                                <div
                                                    className="w-10 h-10 rounded-full flex items-center justify-center text-white text-xl"
                                                    style={{ backgroundColor: badge.color }}
                                                >
                                                    {badge.icon || '⭐'}
                                                </div>
                                                <div>
                                                    <h4 className="font-medium text-neutral-900">{badge.name}</h4>
                                                    <p className="text-sm text-neutral-600">{badge.description}</p>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {hotel.badges?.length === 0 && (
                                    <p className="text-center text-neutral-500 py-8">
                                        No badges assigned yet. Click "Auto-Assign Badges" to automatically assign based on criteria.
                                    </p>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            </div>
        </>
    );
}

function TabButton({ active, onClick, children }) {
    return (
        <button
            onClick={onClick}
            className={`px-4 py-2 text-sm font-medium transition-colors ${
                active
                    ? 'text-neutral-900 border-b-2 border-neutral-900'
                    : 'text-neutral-600 hover:text-neutral-900'
            }`}
        >
            {children}
        </button>
    );
}
