import { Link, Head, useForm } from '@inertiajs/react';
import { useState } from 'react';
import { toast } from 'react-toastify';
import AdminNav from '@/Components/AdminNav';

export default function CreateHotel({ destinations, stats }) {
    const [activeTab, setActiveTab] = useState('basic');

    const { data, setData, post, processing, errors } = useForm({
        name: '',
        destination_id: '',
        description: '',
        address: '',
        latitude: '',
        longitude: '',
        star_rating: '',
        total_rooms: '',
        phone: '',
        email: '',
        website: '',
        booking_affiliate_url: '',
        expedia_affiliate_url: '',
        direct_booking_url: '',
        affiliate_provider: '',
        affiliate_tracking_code: '',
        is_active: true,
        is_verified: false,
        is_featured: false,
        subscription_tier: 'free',
        // Pool & Features
        pool_overview: [],
        pool_overview_other: '',
        pool_details: [],
        pool_details_other: '',
        sun_exposure: '',
        number_of_pools: '',
        shade_options: [],
        shade_options_other: '',
        special_features: [],
        special_features_other: '',
        atmosphere_vibe: [],
        atmosphere_vibe_other: '',
        family_features: [],
        family_features_other: '',
    });

    const handleSubmit = (e) => {
        e.preventDefault();
        post(route('admin.hotels.store'), {
            onSuccess: () => {
                toast.success('Hotel created successfully!');
            },
            onError: () => {
                toast.error('Failed to create hotel. Please check the form.');
            },
        });
    };

    return (
        <>
            <Head title="Add New Hotel" />
            
            <div className="min-h-screen bg-neutral-50 font-sans-luxury">
                <AdminNav stats={stats} />
                
                {/* Page Header */}
                <div className="bg-white shadow-sm border-b border-neutral-100">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 md:py-10 lg:py-12">
                        {/* Decorative accent */}
                        <div className="flex items-center justify-center mb-4 sm:mb-5 md:mb-6">
                            <div className="h-px w-8 sm:w-10 md:w-12 bg-neutral-300"></div>
                            <svg className="mx-3 sm:mx-4 text-neutral-400" width="16" height="16" viewBox="0 0 20 20" fill="none">
                                <path d="M10 2L11.5 8.5L18 10L11.5 11.5L10 18L8.5 11.5L2 10L8.5 8.5L10 2Z" stroke="currentColor" strokeWidth="1.5"/>
                            </svg>
                            <div className="h-px w-8 sm:w-10 md:w-12 bg-neutral-300"></div>
                        </div>
                        <div className="text-center sm:text-left">
                            <h1 className="font-serif-luxury text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-light text-neutral-900 tracking-tight">Add New Hotel</h1>
                            <p className="text-neutral-600 mt-2 font-light tracking-wide">Create a new hotel listing</p>
                        </div>
                    </div>
                </div>

                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 md:py-12 lg:py-16">
                    <form onSubmit={handleSubmit}>
                        {/* Tabs */}
                        <div className="bg-white rounded-t-xl border-b border-neutral-200 shadow-lg">
                            <div className="flex gap-1 px-6 pt-4 overflow-x-auto">
                                <TabButton active={activeTab === 'basic'} onClick={() => setActiveTab('basic')}>
                                    Basic Info
                                </TabButton>
                                <TabButton active={activeTab === 'contact'} onClick={() => setActiveTab('contact')}>
                                    Contact & Location
                                </TabButton>
                                <TabButton active={activeTab === 'pool'} onClick={() => setActiveTab('pool')}>
                                    Pool & Features
                                </TabButton>
                                <TabButton active={activeTab === 'affiliate'} onClick={() => setActiveTab('affiliate')}>
                                    Affiliate Links
                                </TabButton>
                                <TabButton active={activeTab === 'settings'} onClick={() => setActiveTab('settings')}>
                                    Settings
                                </TabButton>
                            </div>
                        </div>

                        {/* Form Content */}
                        <div className="bg-white rounded-b-xl shadow-lg hover:shadow-2xl transition-shadow duration-500 p-5 sm:p-6 md:p-8 border border-neutral-100 border-t-0">
                            {/* Basic Info Tab */}
                            {activeTab === 'basic' && (
                                <div className="space-y-6">
                                    <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Basic Information</h2>
                                    
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Hotel Name *
                                        </label>
                                        <input
                                            type="text"
                                            value={data.name}
                                            onChange={e => setData('name', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            required
                                        />
                                        {errors.name && <p className="mt-1 text-sm text-red-600 font-light">{errors.name}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Destination *
                                        </label>
                                        <select
                                            value={data.destination_id}
                                            onChange={e => setData('destination_id', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            required
                                        >
                                            <option value="">Select a destination</option>
                                            {destinations.map(dest => (
                                                <option key={dest.id} value={dest.id}>{dest.name}</option>
                                            ))}
                                        </select>
                                        {errors.destination_id && <p className="mt-1 text-sm text-red-600 font-light">{errors.destination_id}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Description
                                        </label>
                                        <textarea
                                            value={data.description}
                                            onChange={e => setData('description', e.target.value)}
                                            rows={6}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="Describe the hotel, its amenities, and unique features..."
                                        />
                                        {errors.description && <p className="mt-1 text-sm text-red-600 font-light">{errors.description}</p>}
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Star Rating
                                            </label>
                                            <input
                                                type="number"
                                                min="1"
                                                max="5"
                                                step="0.5"
                                                value={data.star_rating}
                                                onChange={e => setData('star_rating', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.star_rating && <p className="mt-1 text-sm text-red-600 font-light">{errors.star_rating}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Total Rooms
                                            </label>
                                            <input
                                                type="number"
                                                min="1"
                                                value={data.total_rooms}
                                                onChange={e => setData('total_rooms', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.total_rooms && <p className="mt-1 text-sm text-red-600 font-light">{errors.total_rooms}</p>}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Contact & Location Tab */}
                            {activeTab === 'contact' && (
                                <div className="space-y-6">
                                    <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Contact & Location</h2>
                                    
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Address
                                        </label>
                                        <textarea
                                            value={data.address}
                                            onChange={e => setData('address', e.target.value)}
                                            rows={3}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="Full address of the hotel..."
                                        />
                                        {errors.address && <p className="mt-1 text-sm text-red-600 font-light">{errors.address}</p>}
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Latitude
                                            </label>
                                            <input
                                                type="text"
                                                value={data.latitude}
                                                onChange={e => setData('latitude', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                                placeholder="e.g., 5.2334"
                                            />
                                            {errors.latitude && <p className="mt-1 text-sm text-red-600 font-light">{errors.latitude}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Longitude
                                            </label>
                                            <input
                                                type="text"
                                                value={data.longitude}
                                                onChange={e => setData('longitude', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                                placeholder="e.g., 73.0297"
                                            />
                                            {errors.longitude && <p className="mt-1 text-sm text-red-600 font-light">{errors.longitude}</p>}
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Phone
                                            </label>
                                            <input
                                                type="tel"
                                                value={data.phone}
                                                onChange={e => setData('phone', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.phone && <p className="mt-1 text-sm text-red-600 font-light">{errors.phone}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Email
                                            </label>
                                            <input
                                                type="email"
                                                value={data.email}
                                                onChange={e => setData('email', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.email && <p className="mt-1 text-sm text-red-600 font-light">{errors.email}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Website
                                            </label>
                                            <input
                                                type="url"
                                                value={data.website}
                                                onChange={e => setData('website', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                                placeholder="https://..."
                                            />
                                            {errors.website && <p className="mt-1 text-sm text-red-600 font-light">{errors.website}</p>}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Pool & Features Tab */}
                            {activeTab === 'pool' && (
                                <div className="space-y-6">
                                    <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Pool & Features</h2>
                                    
                                    {/* Pool & Sun Overview */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Pool & Sun Overview (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Sun all day', 'Plenty of shade', 'Sun all day with shaded areas', 'Morning sun, afternoon shade', 
                                              'Afternoon sun, morning shade', 'Full sun exposure', 'Partially shaded throughout day', 
                                              'Natural palm tree shade', 'Cabanas and umbrellas available', 'Mix of sun and shade areas'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.pool_overview.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('pool_overview', [...data.pool_overview, option]);
                                                            } else {
                                                                setData('pool_overview', data.pool_overview.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.pool_overview_other}
                                                onChange={e => setData('pool_overview_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.pool_overview_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.pool_overview.includes(data.pool_overview_other.trim())) {
                                                            setData('pool_overview', [...data.pool_overview, data.pool_overview_other.trim()]);
                                                        }
                                                        setData('pool_overview_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.pool_overview_other.trim() && !data.pool_overview.includes(data.pool_overview_other.trim())) {
                                                        setData('pool_overview', [...data.pool_overview, data.pool_overview_other.trim()]);
                                                        setData('pool_overview_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.pool_overview.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.pool_overview.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('pool_overview', data.pool_overview.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.pool_overview && <p className="mt-1 text-sm text-red-600 font-light">{errors.pool_overview}</p>}
                                    </div>

                                    {/* Pool Details */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Pool Details (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Infinity pool with ocean views', 'Multiple pools including infinity edge', 'Rooftop pool with city views',
                                              'Lagoon-style pool with swim-up bar', 'Olympic-sized lap pool', 'Temperature-controlled pool year-round',
                                              'Adults-only pool available', 'Standard outdoor pool'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.pool_details.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('pool_details', [...data.pool_details, option]);
                                                            } else {
                                                                setData('pool_details', data.pool_details.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.pool_details_other}
                                                onChange={e => setData('pool_details_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.pool_details_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.pool_details.includes(data.pool_details_other.trim())) {
                                                            setData('pool_details', [...data.pool_details, data.pool_details_other.trim()]);
                                                        }
                                                        setData('pool_details_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.pool_details_other.trim() && !data.pool_details.includes(data.pool_details_other.trim())) {
                                                        setData('pool_details', [...data.pool_details, data.pool_details_other.trim()]);
                                                        setData('pool_details_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.pool_details.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.pool_details.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('pool_details', data.pool_details.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.pool_details && <p className="mt-1 text-sm text-red-600 font-light">{errors.pool_details}</p>}
                                    </div>

                                    {/* Sun Exposure & Number of Pools */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Sun Exposure
                                            </label>
                                            <select
                                                value={data.sun_exposure}
                                                onChange={e => setData('sun_exposure', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            >
                                                <option value="">Select sun exposure</option>
                                                <option value="All day sun">All day sun</option>
                                                <option value="Morning sun">Morning sun</option>
                                                <option value="Afternoon sun">Afternoon sun</option>
                                                <option value="Partial sun">Partial sun</option>
                                                <option value="Mostly shaded">Mostly shaded</option>
                                            </select>
                                            {errors.sun_exposure && <p className="mt-1 text-sm text-red-600 font-light">{errors.sun_exposure}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Number of Pools
                                            </label>
                                            <input
                                                type="number"
                                                min="0"
                                                value={data.number_of_pools}
                                                onChange={e => setData('number_of_pools', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                                placeholder="e.g., 3"
                                            />
                                            {errors.number_of_pools && <p className="mt-1 text-sm text-red-600 font-light">{errors.number_of_pools}</p>}
                                        </div>
                                    </div>

                                    {/* Shade Options */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Shade Options (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Umbrellas', 'Cabanas', 'Pergolas', 'Natural palm trees', 'Covered areas', 
                                              'Retractable awnings', 'Shade sails', 'No shade available'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.shade_options.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('shade_options', [...data.shade_options, option]);
                                                            } else {
                                                                setData('shade_options', data.shade_options.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.shade_options_other}
                                                onChange={e => setData('shade_options_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.shade_options_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.shade_options.includes(data.shade_options_other.trim())) {
                                                            setData('shade_options', [...data.shade_options, data.shade_options_other.trim()]);
                                                        }
                                                        setData('shade_options_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.shade_options_other.trim() && !data.shade_options.includes(data.shade_options_other.trim())) {
                                                        setData('shade_options', [...data.shade_options, data.shade_options_other.trim()]);
                                                        setData('shade_options_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.shade_options.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.shade_options.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('shade_options', data.shade_options.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.shade_options && <p className="mt-1 text-sm text-red-600 font-light">{errors.shade_options}</p>}
                                    </div>

                                    {/* Special Features */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Special Features (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Swim-up bar', 'Infinity edge', 'Waterfall', 'Lazy river', 'Water slides', 
                                              'Hot tub/Jacuzzi', 'Poolside DJ', 'Beach access', 'Underwater music', 
                                              'LED lighting', 'Heated pool', 'Saltwater pool', 'Private pool areas', 
                                              'Poolside cabanas with service'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.special_features.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('special_features', [...data.special_features, option]);
                                                            } else {
                                                                setData('special_features', data.special_features.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.special_features_other}
                                                onChange={e => setData('special_features_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.special_features_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.special_features.includes(data.special_features_other.trim())) {
                                                            setData('special_features', [...data.special_features, data.special_features_other.trim()]);
                                                        }
                                                        setData('special_features_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.special_features_other.trim() && !data.special_features.includes(data.special_features_other.trim())) {
                                                        setData('special_features', [...data.special_features, data.special_features_other.trim()]);
                                                        setData('special_features_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.special_features.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.special_features.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('special_features', data.special_features.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.special_features && <p className="mt-1 text-sm text-red-600 font-light">{errors.special_features}</p>}
                                    </div>

                                    {/* Atmosphere & Vibe */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Atmosphere & Vibe (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Lively and social with DJ and entertainment', 'Upbeat party atmosphere', 'Relaxed and tranquil escape',
                                              'Romantic and intimate setting', 'Family-friendly and energetic', 'Sophisticated and elegant',
                                              'Adults-only peaceful retreat', 'Casual and laid-back'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.atmosphere_vibe.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('atmosphere_vibe', [...data.atmosphere_vibe, option]);
                                                            } else {
                                                                setData('atmosphere_vibe', data.atmosphere_vibe.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.atmosphere_vibe_other}
                                                onChange={e => setData('atmosphere_vibe_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.atmosphere_vibe_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.atmosphere_vibe.includes(data.atmosphere_vibe_other.trim())) {
                                                            setData('atmosphere_vibe', [...data.atmosphere_vibe, data.atmosphere_vibe_other.trim()]);
                                                        }
                                                        setData('atmosphere_vibe_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.atmosphere_vibe_other.trim() && !data.atmosphere_vibe.includes(data.atmosphere_vibe_other.trim())) {
                                                        setData('atmosphere_vibe', [...data.atmosphere_vibe, data.atmosphere_vibe_other.trim()]);
                                                        setData('atmosphere_vibe_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.atmosphere_vibe.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.atmosphere_vibe.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('atmosphere_vibe', data.atmosphere_vibe.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.atmosphere_vibe && <p className="mt-1 text-sm text-red-600 font-light">{errors.atmosphere_vibe}</p>}
                                    </div>

                                    {/* Family Features */}
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-3 tracking-wide">
                                            Family Features (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {['Excellent - Kids pool, splash pad, kids club, babysitting', 'Very Good - Kids pool, kids club, family rooms',
                                              'Good - Kids pool and family-friendly amenities', 'Limited - Basic family facilities available',
                                              'Adults-only - No children facilities'].map(option => (
                                                <label key={option} className="flex items-center gap-2 cursor-pointer">
                                                    <input
                                                        type="checkbox"
                                                        checked={data.family_features.includes(option)}
                                                        onChange={e => {
                                                            if (e.target.checked) {
                                                                setData('family_features', [...data.family_features, option]);
                                                            } else {
                                                                setData('family_features', data.family_features.filter(item => item !== option));
                                                            }
                                                        }}
                                                        className="w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-sm font-light text-neutral-700">{option}</span>
                                                </label>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                value={data.family_features_other}
                                                onChange={e => setData('family_features_other', e.target.value)}
                                                onKeyPress={e => {
                                                    if (e.key === 'Enter' && data.family_features_other.trim()) {
                                                        e.preventDefault();
                                                        if (!data.family_features.includes(data.family_features_other.trim())) {
                                                            setData('family_features', [...data.family_features, data.family_features_other.trim()]);
                                                        }
                                                        setData('family_features_other', '');
                                                    }
                                                }}
                                                placeholder="Other (type custom option and press Enter)..."
                                                className="flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    if (data.family_features_other.trim() && !data.family_features.includes(data.family_features_other.trim())) {
                                                        setData('family_features', [...data.family_features, data.family_features_other.trim()]);
                                                        setData('family_features_other', '');
                                                    }
                                                }}
                                                className="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 font-light transition-all duration-300 whitespace-nowrap"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        {data.family_features.length > 0 && (
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {data.family_features.map((item, index) => (
                                                    <span key={index} className="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-light">
                                                        {item}
                                                        <button
                                                            type="button"
                                                            onClick={() => setData('family_features', data.family_features.filter((_, i) => i !== index))}
                                                            className="text-blue-600 hover:text-blue-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                        {errors.family_features && <p className="mt-1 text-sm text-red-600 font-light">{errors.family_features}</p>}
                                    </div>
                                </div>
                            )}

                            {/* Affiliate Links Tab */}
                            {activeTab === 'affiliate' && (
                                <div className="space-y-6">
                                    <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Affiliate & Booking Links</h2>
                                    
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Booking.com Affiliate URL
                                        </label>
                                        <input
                                            type="url"
                                            value={data.booking_affiliate_url}
                                            onChange={e => setData('booking_affiliate_url', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="https://booking.com/..."
                                        />
                                        {errors.booking_affiliate_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.booking_affiliate_url}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Expedia Affiliate URL
                                        </label>
                                        <input
                                            type="url"
                                            value={data.expedia_affiliate_url}
                                            onChange={e => setData('expedia_affiliate_url', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="https://expedia.com/..."
                                        />
                                        {errors.expedia_affiliate_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.expedia_affiliate_url}</p>}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Direct Booking URL
                                        </label>
                                        <input
                                            type="url"
                                            value={data.direct_booking_url}
                                            onChange={e => setData('direct_booking_url', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            placeholder="https://..."
                                        />
                                        {errors.direct_booking_url && <p className="mt-1 text-sm text-red-600 font-light">{errors.direct_booking_url}</p>}
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Affiliate Provider
                                            </label>
                                            <input
                                                type="text"
                                                value={data.affiliate_provider}
                                                onChange={e => setData('affiliate_provider', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.affiliate_provider && <p className="mt-1 text-sm text-red-600 font-light">{errors.affiliate_provider}</p>}
                                        </div>

                                        <div>
                                            <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                                Affiliate Tracking Code
                                            </label>
                                            <input
                                                type="text"
                                                value={data.affiliate_tracking_code}
                                                onChange={e => setData('affiliate_tracking_code', e.target.value)}
                                                className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                            />
                                            {errors.affiliate_tracking_code && <p className="mt-1 text-sm text-red-600 font-light">{errors.affiliate_tracking_code}</p>}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Settings Tab */}
                            {activeTab === 'settings' && (
                                <div className="space-y-6">
                                    <h2 className="font-serif-luxury text-xl sm:text-2xl font-light text-neutral-900 mb-6">Hotel Settings</h2>
                                    
                                    <div>
                                        <label className="block text-sm font-light text-neutral-700 mb-2 tracking-wide">
                                            Subscription Tier
                                        </label>
                                        <select
                                            value={data.subscription_tier}
                                            onChange={e => setData('subscription_tier', e.target.value)}
                                            className="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-light"
                                        >
                                            <option value="free">Free</option>
                                            <option value="enhanced">Enhanced</option>
                                            <option value="premium">Premium</option>
                                        </select>
                                        {errors.subscription_tier && <p className="mt-1 text-sm text-red-600 font-light">{errors.subscription_tier}</p>}
                                    </div>

                                    <div className="space-y-4">
                                        <label className="flex items-center gap-3 cursor-pointer">
                                            <input
                                                type="checkbox"
                                                checked={data.is_active}
                                                onChange={e => setData('is_active', e.target.checked)}
                                                className="w-5 h-5 rounded border-neutral-300 text-neutral-900 focus:ring-2 focus:ring-blue-500"
                                            />
                                            <div>
                                                <span className="text-sm font-light text-neutral-900 tracking-wide">Active</span>
                                                <p className="text-xs text-neutral-500 font-light">Hotel is visible and bookable on the site</p>
                                            </div>
                                        </label>

                                        <label className="flex items-center gap-3 cursor-pointer">
                                            <input
                                                type="checkbox"
                                                checked={data.is_verified}
                                                onChange={e => setData('is_verified', e.target.checked)}
                                                className="w-5 h-5 rounded border-neutral-300 text-blue-600 focus:ring-2 focus:ring-blue-500"
                                            />
                                            <div>
                                                <span className="text-sm font-light text-neutral-900 tracking-wide">Verified</span>
                                                <p className="text-xs text-neutral-500 font-light">Hotel information has been verified</p>
                                            </div>
                                        </label>

                                        <label className="flex items-center gap-3 cursor-pointer">
                                            <input
                                                type="checkbox"
                                                checked={data.is_featured}
                                                onChange={e => setData('is_featured', e.target.checked)}
                                                className="w-5 h-5 rounded border-neutral-300 text-orange-600 focus:ring-2 focus:ring-blue-500"
                                            />
                                            <div>
                                                <span className="text-sm font-light text-neutral-900 tracking-wide">Featured</span>
                                                <p className="text-xs text-neutral-500 font-light">Highlight this hotel in listings and homepage</p>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            )}

                            {/* Action Buttons */}
                            <div className="mt-8 pt-6 border-t border-neutral-200 flex flex-col sm:flex-row gap-3 justify-end">
                                <Link
                                    href={route('admin.hotels.index')}
                                    className="px-4 sm:px-6 py-3 sm:py-4 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 font-light transition-all duration-300 text-center tracking-wide text-sm sm:text-base"
                                >
                                    Cancel
                                </Link>
                                <button
                                    type="submit"
                                    disabled={processing}
                                    className="px-4 sm:px-6 py-3 sm:py-4 bg-neutral-900 text-white font-light rounded-lg hover:bg-neutral-800 transition-all duration-300 text-center tracking-wide hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
                                >
                                    {processing ? 'Creating...' : 'Create Hotel'}
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </>
    );
}

function TabButton({ active, onClick, children }) {
    return (
        <button
            type="button"
            onClick={onClick}
            className={`px-4 py-2 font-light text-sm tracking-wide transition-all duration-300 border-b-2 whitespace-nowrap ${
                active
                    ? 'border-neutral-900 text-neutral-900'
                    : 'border-transparent text-neutral-600 hover:text-neutral-900 hover:border-neutral-300'
            }`}
        >
            {children}
        </button>
    );
}
